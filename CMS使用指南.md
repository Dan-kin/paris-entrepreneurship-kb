# Decap CMS 使用指南 📝

欢迎使用巴黎创业知识库的内容管理系统！本指南将帮助你快速上手，顺利发布文章。

## 📚 目录

1. [访问后台](#访问后台)
2. [首次登录设置](#首次登录设置)
3. [发布新文章](#发布新文章)
4. [编辑现有文章](#编辑现有文章)
5. [使用编辑工作流](#使用编辑工作流)
6. [上传图片](#上传图片)
7. [常见问题](#常见问题)

---

## 访问后台

1. 在浏览器中访问：`https://你的网站域名.netlify.app/admin/`
2. 例如：`https://paris-entrepreneurship-kb.netlify.app/admin/`

## 首次登录设置

### 步骤 1: GitHub 授权

1. 点击 "Login with GitHub" 按钮
2. 如果未登录 GitHub，系统会要求你先登录
3. 授权 Decap CMS 访问你的 GitHub 仓库
4. 首次授权需要仓库所有者或管理员权限

### 步骤 2: 在 Netlify 配置 GitHub OAuth

**重要：必须在 Netlify 配置 OAuth 才能正常使用 CMS！**

1. 登录 [Netlify](https://app.netlify.com)
2. 选择你的站点
3. 进入 `Site settings` → `Access control` → `OAuth`
4. 点击 `Install provider`
5. 选择 `GitHub`
6. 填写 GitHub OAuth 应用信息：
   - 如果还没有 GitHub OAuth App，需要先创建：
     - 访问 [GitHub Settings > Developer settings > OAuth Apps](https://github.com/settings/developers)
     - 点击 "New OAuth App"
     - 填写信息：
       - Application name: `Decap CMS - 巴黎创业知识库`
       - Homepage URL: `https://你的网站.netlify.app`
       - Authorization callback URL: `https://api.netlify.com/auth/done`
     - 点击 "Register application"
     - 复制 `Client ID` 和生成 `Client Secret`
7. 在 Netlify 中粘贴 Client ID 和 Client Secret
8. 保存设置

## 发布新文章

### 方法一：快速发布（推荐新手）

1. 登录后台后，点击左侧菜单的 **"文章"**
2. 点击右上角的 **"新建文章"** 按钮
3. 填写文章信息：

   **基本信息：**
   - **标题**：输入文章标题（必填）
   - **发布日期**：选择发布日期和时间（自动填充当前时间）
   - **作者**：默认为"巴黎创业团队"，可修改
   - **描述**：简短描述文章内容（可选，建议填写，有利于 SEO）

   **分类和标签：**
   - **标签**：点击 "Add tags" 添加标签，每个标签代表一个关键词
     - 例如：`创业`、`签证`、`居留`
   - **分类**：从下拉菜单选择：
     - 创业指南
     - 签证居留
     - 日常生活
     - 资源分享
     - 案例故事

   **可选设置：**
   - **特色图片**：上传文章的封面图片（可选）
   - **是否发布**：勾选表示立即发布，不勾选为草稿状态

   **正文：**
   - 使用 Markdown 格式编写文章正文
   - 支持标题、列表、链接、图片等格式

4. 点击 **"保存"** 按钮保存草稿
5. 点击 **"发布"** → **"立即发布"** 正式发布文章

### 方法二：使用编辑工作流（推荐团队协作）

1. 创建文章后，点击 **"保存"**（此时文章处于"草稿"状态）
2. 在工作流面板中，你会看到三个列：
   - **草稿（Drafts）**：新创建的文章
   - **审核中（In Review）**：等待审核的文章
   - **准备发布（Ready）**：已审核通过，等待发布

3. 拖动文章卡片在不同列之间移动：
   - 从"草稿"→"审核中"：提交审核
   - 从"审核中"→"准备发布"：审核通过
   - 从"准备发布"→点击"发布"：正式发布到网站

## 编辑现有文章

1. 在左侧菜单选择 **"文章"**
2. 找到你想编辑的文章，点击进入
3. 修改内容
4. 点击 **"保存"** 保存更改
5. 如果使用编辑工作流，需要重新提交审核
6. 如果直接发布，点击 **"发布"** → **"更新发布"**

## 使用编辑工作流

编辑工作流让你可以：
- 创建草稿文章，慢慢完善
- 团队成员之间互相审核
- 定时发布文章

### 工作流状态说明

- **草稿（Draft）**：文章还在编辑中
- **审核中（In Review）**：文章已完成，等待审核
- **准备发布（Ready）**：文章已审核，随时可以发布

### 查看工作流

点击顶部的 **"Workflow"** 标签，可以看到看板视图，方便管理文章状态。

## 上传图片

### 方法一：在文章中直接上传

1. 在正文编辑器中，点击图片图标
2. 选择 "上传文件"
3. 选择你的图片文件
4. 图片会自动上传到 `static/uploads` 目录
5. Markdown 代码会自动插入到文章中

### 方法二：先上传后使用

1. 在文章编辑页面，找到 **"特色图片"** 字段
2. 点击 "选择图片" 或直接拖拽图片
3. 图片上传后会显示预览
4. 在正文中使用相对路径引用：`![描述](/uploads/图片名.jpg)`

### 图片格式建议

- **格式**：JPG、PNG、GIF、WebP
- **大小**：建议单张图片不超过 2MB
- **分辨率**：1200x630px（适合社交媒体分享）
- **命名**：使用有意义的英文名，如 `paris-startup-guide.jpg`

## 内容类型说明

### 文章（Posts）

用于发布时效性内容，如：
- 创业指南和教程
- 最新政策解读
- 活动资讯
- 经验分享

### 页面（Pages）

用于发布固定内容，如：
- 关于我们
- 联系方式
- 服务条款
- 隐私政策

### 资源（Resources）

用于收录外部资源，如：
- 政府部门信息
- 创业平台
- 投资机构
- 服务机构

## Markdown 语法快速参考

```markdown
# 一级标题
## 二级标题
### 三级标题

**粗体文字**
*斜体文字*

- 无序列表项 1
- 无序列表项 2

1. 有序列表项 1
2. 有序列表项 2

[链接文字](https://example.com)

![图片描述](/uploads/image.jpg)

> 引用文字

代码块：
```
代码内容
```
```

## 常见问题

### Q1: 无法登录后台？

**答**：请确保：
1. 已在 Netlify 配置 GitHub OAuth（最常见原因）
2. 你的 GitHub 账号有仓库访问权限
3. 浏览器没有屏蔽第三方 Cookie
4. 尝试清除浏览器缓存后重新登录

### Q2: 发布文章后网站没有显示？

**答**：可能的原因：
1. 网站可能需要几分钟时间重新构建和部署
2. 检查 Netlify 的部署日志，确认构建成功
3. 确认文章的 `published` 字段设置为 `true`
4. 刷新浏览器缓存（Ctrl+F5 或 Cmd+Shift+R）

### Q3: 图片无法上传？

**答**：
1. 检查图片大小是否超过限制（建议 < 2MB）
2. 确认图片格式是否支持（JPG、PNG、GIF）
3. 检查网络连接是否正常
4. 尝试使用较小的图片

### Q4: 文章保存后找不到了？

**答**：
1. 检查"Workflow"标签中的草稿区
2. 在文章列表中使用搜索功能
3. 检查浏览器控制台是否有错误信息

### Q5: 如何删除文章？

**答**：
1. 进入文章编辑页面
2. 点击右上角的"删除"按钮（垃圾桶图标）
3. 确认删除
4. 文章会从 GitHub 仓库中删除

### Q6: 可以多人同时编辑吗？

**答**：
- 可以多人登录后台
- 但不建议同时编辑同一篇文章，可能导致冲突
- 使用编辑工作流可以更好地协作

### Q7: 如何预览文章效果？

**答**：
- Decap CMS 提供实时预览功能
- 在编辑页面右侧可以看到预览
- 或者将文章设置为草稿状态，通过 Netlify Deploy Preview 查看

## 技术支持

如果遇到其他问题：
1. 查看 [Decap CMS 官方文档](https://decapcms.org/docs/)
2. 检查 GitHub Issues 中是否有相关问题
3. 联系技术管理员

## 附：文件结构说明

```
paris-entrepreneurship-kb/
├── admin/              # CMS 后台文件
│   ├── index.html     # 后台入口
│   └── config.yml     # CMS 配置文件
├── content/           # 内容目录
│   ├── posts/         # 文章
│   ├── pages/         # 页面
│   └── resources/     # 资源
├── static/            # 静态文件
│   └── uploads/       # 上传的图片和文件
└── index.html         # 网站首页
```

---

**祝你使用愉快！如有任何问题，欢迎随时联系我们。** 🎉
